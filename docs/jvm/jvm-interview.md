# Jvm常见面试题

## JVM 三大性能调优参数`-Xms` `-Xmx` `-Xss`的含义是什么?
```shell
java -Xms128m -Xmx128M -Xss256k -jar xxxx.jar
``` 
可以用来调整java的堆以及线程所占内存的大小。
- Xss: 规定了每个线程虚拟机栈(堆栈)的大小，一般情况下256k即可，会影响线程并发线程的内存大小,在相同物理内存下,减小这个值能生成更多的线程.但是操作系统对一个进程内的线程数还是有限制的,不能无限生成,经验值在3000~5000左右.

- Xms: 堆得初始值
- Xmx: 堆能达到的最大值,此值可以设置与-Xmx相同,以避免每次垃圾回收完成后JVM重新分配内存

## Java内存模型中堆和栈的区别?java的程序在运行时的内存分配策略
1. 静态存储： 编译时确定每个数据目标在运行时的存储空间需求(要求程序代码不允许有可变的数据结构存在,也不允许有嵌套或者递归的结构出现=>会导致编译程序无法计算固定的存储空间)
2. 栈式存储: 数据区需求在编译时未知,运行时模块入口前确定（动态的存储分配,编译时未知数据的大小,按照先进后出的原则分配）
3. 堆式存储: 编译时或运行时模块入口都无法确定大小，动态分配内存(堆由大片的块或运行块组成,堆中的内存可以按照任意顺序分配和释放)

栈和堆的**联系:**
- 引用对象、数组时，栈里定义变量保存堆中目标的首地址(使用栈中的引用[变量]访问堆中的存储的数据[对象本身])=>
[引用变量]在其程序指向到作用域之外后就会被释放掉，但是在[对象本身]并不会被释放掉,只有在没有引用指向变量之后,对象本身会变为垃圾，由GC回收

**区别:**
- 管理方式: 管理方式: 栈自动释放，堆需要GC
- 空间大小： 栈比对小
- 碎片相关: 栈产生的碎片远小于栈(GC回收机制不是实时的)
- 分配方式: 栈支持静态和动态分配，而堆仅支持动态分配
- 效率: 咱的效率比堆高


## 元空间、堆、线程独占部分件的联系--内存角度



## 不同JDK版本之间的intern()方法的区别--JDK6vsJDK6+(6之前的版本)
>字符串自带的方法

- JDK6: 当调用`intern`方法时,如果字符串常量池先前已经创建出该字符串的对象，则返回池中的该字符串的引用。否则，将此字符串对象添加到字符串常量池中，并且返回该字符串对象的引用。
- JDK6+: 当调用`intern`方法时,如果字符串常量池先前已经创建出该字符串的对象，则返回池中的该字符串的引用。如果该字符串对象已经存在于java堆中，则将java堆中此对象的引用添加到字符串常量池中，并且返回该引用；如果堆中不存在，则在吃中创建该字符串并返回其引用。


